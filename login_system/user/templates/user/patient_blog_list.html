{% extends "base.html" %}

{% block content %}
<h1>All Blogs</h1>

<!-- Category Filter -->
<form method="get">
    <label for="category">Filter by Category:</label>
    <select name="category" onchange="this.form.submit()">
        <option value="">All</option>
        {% for cat in categories %}
            <option value="{{ cat }}" {% if selected_category == cat %}selected{% endif %}>
                {{ cat }}
            </option>
        {% endfor %}
    </select>
</form>

<!-- Blog List -->
{% for blog in blogs %}
<div style="border:1px solid #ccc; padding:10px; margin:10px;">
    <h2>{{ blog.title }}</h2>

    {% if blog.image %}
        <img src="{{ blog.image.url }}" alt="{{ blog.title }}" width="200">
    {% endif %}

    <p>{{ blog.truncated_summary }}</p>
    <p><strong>Category:</strong> {{ blog.category }}</p>
</div>
{% empty %}
<p>No blogs available.</p>
{% endfor %}
{% endblock %}
